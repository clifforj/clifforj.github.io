!function(t){"use strict";t.module("csg",[])}(window.angular),function(t){"use strict";function n(t){function n(n){return i[n]?r=i[n]:i[n]=r=t.calculateSphere(n),r}function e(){return r}var r,i={};return{getCalculation:n,getLastRetrievedCalculation:e}}t.module("csg").factory("calculationManagerService",n),n.$inject=["calculationService"]}(window.angular),function(t){"use strict";function n(t){function n(n){i(n);for(var o,a=[],s=[],u=1;u<n;u++)a.push(e(u)),o=r(u),s.push(o);return new t(a,s)}function e(t){var n=Math.sin(a.radiansPerStep*t);return Math.round(n*a.stepScale)}function r(t){var n,e=Math.cos(a.radiansPerStep*(t-1)),r=Math.cos(a.radiansPerStep*t);e>0&&r<0?n=e+Math.abs(r):e>0&&r>0?n=e-r:(e=Math.cos(a.radiansPerStep*t),r=Math.cos(a.radiansPerStep*(t+1)),n=Math.abs(r)-Math.abs(e));var i=Math.sin(a.radiansPerStep*t),o=Math.abs(n);return[i,o]}function i(t){var n=Math.PI/t,e=o/Math.sin(n);return a={radiansPerStep:n,stepScale:e}}var o=6,a=null;return{calculateSphere:n,refreshCalculationBase:i,getRowStitchCount:e,getRowDimensions:r}}t.module("csg").factory("calculationService",n),n.$inject=["Sphere"]}(window.angular),function(t){"use strict";function n(){function t(t,n,e,r){this.rowIndex=t,this.previousRowCount=0===n?e:n,this.targetRowCount=e,this.rowDimensions=r}return t.INCREASE="inc",t.DECREASE="dec",t.SINGLE=" sc",t.MAGIC_CIRCLE="Magic circle with",t.prototype.generateInstructionSteps=function(){var n=[],e=this.targetRowCount>this.previousRowCount?t.INCREASE:t.DECREASE,r=Math.abs(this.targetRowCount-this.previousRowCount),i=e==t.INCREASE?this.previousRowCount-r:this.targetRowCount-r;n=1===r?this.generateStepsForSingleChange(i,e):0===r?[this.targetRowCount]:this.generateStepsForMultipleChanges(i,r,e);for(var o=0;o<n.length;o++)isNaN(n[o])||(n[o]+=t.SINGLE);return n},t.prototype.generateStepsForSingleChange=function(t,n){var e=t/5,r=Math.round((this.rowIndex%4+1)*e),i=t-r;return[r,n,i]},t.prototype.generateStepsForMultipleChanges=function(t,n,e){for(var r,i=[],o=t/(n+1),a=t-Math.round(o*n),s=0;s<n;s++)0!==o&&(r=Math.round(o*(s+1))-Math.round(o*s),0!==r&&i.push(r)),i.push(e);return 0!==a&&i.push(a),i},t.prototype.generateInstructionText=function(){var n;return n=0===this.rowIndex?[t.MAGIC_CIRCLE,this.getInstructionSteps()[0]].join(" "):this.getInstructionSteps().join(", "),n+=" ("+this.targetRowCount+")"},t.prototype.getInstructionSteps=function(){return this.steps||(this.steps=this.generateInstructionSteps()),this.steps},t.prototype.getInstructionText=function(){return this.text||(this.text=this.generateInstructionText()),this.text},t}t.module("csg").factory("Instruction",n)}(window.angular),function(t){"use strict";function n(t){function n(n,e){this.rowCounts=n,this.rowDimensions=e,this.instructions=[];for(var r=0;r<n.length;r++)0===r?this.instructions.push(new t(0,0,n[r],e[r])):this.instructions.push(new t(r,n[r-1],n[r],e[r]))}return n}t.module("csg").factory("Sphere",n),n.$inject=["Instruction"]}(window.angular),function(t){"use strict";function n(){return{restrict:"E",scope:{},controller:e,controllerAs:"vm",bindToController:!0,templateUrl:"ui/instruction-diagram/instruction-diagram.html"}}function e(t){function n(){return i.latestCalculation=t.getLastRetrievedCalculation(),i.latestCalculation}function e(t){return 150*i.latestCalculation.instructions[t].rowDimensions[1]+"px"}function r(t){return 300*i.latestCalculation.instructions[t].rowDimensions[0]+"px"}var i=this;i.latestCalculation=n(),i.getLatestCalculation=n,i.getRowHeight=e,i.getRowWidth=r}t.module("csg").directive("instructionDiagram",n),e.$inject=["calculationManagerService"]}(window.angular),function(t){"use strict";function n(){return{restrict:"E",scope:{},controller:e,controllerAs:"vm",bindToController:!0,templateUrl:"ui/calculation-form/calculation-form.html",replace:!0}}function e(t){function n(){e.sphere=t.getCalculation(e.numberOfRows)}var e=this;e.numberOfRows=15,e.calculate=n}t.module("csg").directive("calculationForm",n),e.$inject=["calculationManagerService"]}(window.angular),function(t){"use strict";function n(){return{restrict:"E",scope:{},controller:e,controllerAs:"vm",bindToController:!0,templateUrl:"ui/instruction-pane/instruction-pane.html"}}function e(t){function n(){return e.latestCalculation=t.getLastRetrievedCalculation(),e.latestCalculation}var e=this;e.latestCalculation=n(),e.getLatestCalculation=n}t.module("csg").directive("instructionPane",n),e.$inject=["calculationManagerService"]}(window.angular),function(t){"use strict";function n(t){function n(){e.sphere=t.calculateSphere(e.numberOfRows)}var e=this;e.numberOfRows=15,e.sphere=null,e.calculate=n}t.module("csg").controller("CsgController",n),n.$inject=["calculationService"]}(window.angular);